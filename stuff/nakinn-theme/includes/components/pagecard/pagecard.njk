{%- if env.mode != 'prod' %}<!-- src/theme-grunn/includes/components/pagecard/pagecard.liquid -->{%- endif -%}
{% comment %}Page card
------------------------------------------------
This template controls how the pagecard template is rendered.

We count the amount of cards that are attached to the componenet pagecard and defines a grid
that matches - and then includes the right card include that matches
#}

{% if component.page | length >= 4 %}
{% elseif component.page | length == 3 %}
{% elseif component.page | length == 2 %}
{% endif %}


{% for page in component.page %}

  {% comment %}test the page and correct the path if its the frontpage aka: / {% endcomment %}
  {% if page == "/" %} {% assign path = "/" %}
  {% else  %} {% assign path = "/" + page + "/" %}
  {% endif %}

  {% comment %}Grap the data from collections.all  {% endcomment %}
  {% for item in collections.all | getPage( path ) -%}


    {% comment %}Test which card we wanna use  {% endcomment %}
    {% if component.page | length == "1" %}
      {% comment %}Single Card  {% endcomment %}



          {% comment %}text {% endcomment %}


            {{ item.data.card.title }}

            {{ item.data.card.text }}


              <a href="{{ item.url }}"
                class="inline-block px-4 py-4 m-4 bg-cyan-700 text-white rounded text-xl">
                {{ item.data.title }}








          {% picture
            img=item.data.card.image,
            width=[400, 800],
            sizes="(min-width: 1600px) 50vw, 100vw",
            alt=item.data.card.alt,
            css="lg:absolute lg:inset-0 w-full h-full object-cover"
          %}



      {% comment %}/ Single Card {% endcomment %}

    {% else %}
      {% comment %}Multiple card - If theres more than one show them as a card {% endcomment %}





            {% picture
              img=item.data.card.image,
              width=[400, 800],
              sizes="(min-width: 1600px) 50vw, 100vw",
              alt=item.data.card.alt
            %}



            {{ item.data.title }}
            {{ item.data.card.text }}




      {% comment %}Multiple card {% endcomment %}



    {% endif %}


  {% endfor %}

{% endfor %}

{% comment %}close the section {% endcomment %}
{% if component.page | length > 1 %}

{% endif %}
